<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Post Box</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 flex justify-center items-center min-h-screen">

    <div class="w-full max-w-lg bg-gray-800 rounded-lg shadow-lg p-6">
        <!-- Post Box -->
        <h2 class="text-white text-2xl mb-4">Create a Post</h2>
        <form id="postForm">
            <div class="mb-4">
                <input type="file" id="fileInput" class="w-full p-3 rounded-lg bg-gray-700 text-white border border-gray-600" accept="image/*,video/*,image/gif">
            </div>
            <textarea id="caption" placeholder="Write a caption..." class="w-full p-3 rounded-lg bg-gray-700 text-white border border-gray-600 mb-4"></textarea>
            <button type="submit" class="w-full p-3 mt-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Post</button>
        </form>
    </div>

    <script>
        // Handle post submission
        const postForm = document.getElementById("postForm");
        const fileInput = document.getElementById("fileInput");
        const caption = document.getElementById("caption");

        postForm.addEventListener("submit", function (e) {
            e.preventDefault();

            const file = fileInput.files[0];
            const captionText = caption.value;

            if (!file) {
                alert("Please upload an image, video, or GIF.");
                return;
            }

            // Create post element
            const post = document.createElement("div");
            post.classList.add("bg-gray-700", "rounded-lg", "p-4");

            // Handle file preview
            let fileElement;
            if (file.type.startsWith("image/")) {
                fileElement = document.createElement("img");
                fileElement.src = URL.createObjectURL(file);
                fileElement.classList.add("w-full", "rounded-lg", "mb-4");
            } else if (file.type.startsWith("video/")) {
                fileElement = document.createElement("video");
                fileElement.src = URL.createObjectURL(file);
                fileElement.classList.add("w-full", "rounded-lg", "mb-4");
                fileElement.controls = true;
            } else if (file.type === "image/gif") {
                fileElement = document.createElement("img");
                fileElement.src = URL.createObjectURL(file);
                fileElement.classList.add("w-full", "rounded-lg", "mb-4");
            }

            // Caption for the post
            const postCaption = document.createElement("p");
            postCaption.classList.add("text-white");
            postCaption.textContent = captionText;

            // Append the post content (this could be to a specific feed, for simplicity it isn't shown here)
            // Feed is handled in a different page (main.html)
            
            // Redirect to the main page after posting
            window.location.href = "main.html";

            // Clear the form for the next post
            fileInput.value = "";
            caption.value = "";
        });
    </script>
</body>
</html>
